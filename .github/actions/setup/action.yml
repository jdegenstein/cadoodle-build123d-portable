name: 'Setup'
inputs:
  python-version:  # id of input
    description: 'Python version'
    required: true

env:
  UV_INSTALL_DIR: ~/cadoodle-build123d-portable/cadoodle-build123d-portable/uv

runs:
  using: "composite"
  steps:
    - name: Create working directory
      shell: bash
      run: |
        mkdir ~/cadoodle-build123d-portable/cadoodle-build123d-portable/uv
    - name: Setup Python
      uses: astral-sh/setup-uv@v6
      with:
        enable-cache: false
        # python-version: ${{ inputs.python-version }}
        # activate-environment: true
    - name: Install Requirements
      shell: bash
      #TODO: re-test with input python version
      run: |
        mkdir python
        mkdir pyinst
        export UV_PYTHON_BIN_DIR="`pwd`/python"
        export UV_PYTHON_INSTALL_DIR="`pwd`/pyinst"
        uv python install 3.12
        uv venv --relocatable --python 3.12
        uv pip install build123d
